- job:
    name: fuel-all-master
    logrotate:
      daysToKeep: 10
      numToKeep: 10
      artifactDaysToKeep: -1
      artifactNumToKeep: 1
    scm:
      - git:
          url: https://github.com/stackforge/fuel-main.git
          branches:
            - master
          skip-tag: true
          wipe-workspace: false
    builders:
      - shell: |
          git review -x 109569
          rm -rf objects
          mkdir -p objects
          ln -sf ~/workspace/fuel-all-5.0.x/artifacts objects/5.0.x
          rm -rf artifacts
          make deep_clean
          make DEPS_DIR=objects ARTS_DIR=artifacts UPGRADE_VERSIONS=5.0.x USE_MIRROR=msk all
    publishers:
      - archive:
          artifacts: artifacts/fuel-*, artifacts/version.yaml
          latest-only: true
    triggers:
      - timed: #H H(6-7) * * 1-5
    wrappers:
      - timeout:
          timeout: 180
          fail: true
